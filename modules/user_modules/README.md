# üìö ÏÇ¨Ïö©Ïûê Ï†ïÏùò Ïã§Ìóò Î™®Îìà Í∞úÎ∞ú Í∞ÄÏù¥Îìú

## üéØ ÏÜåÍ∞ú

Universal DOE PlatformÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§! Ïù¥ Í∞ÄÏù¥ÎìúÎäî Ïó¨Îü¨Î∂ÑÏù¥ ÏûêÏã†ÎßåÏùò Ïã§Ìóò ÏÑ§Í≥Ñ Î™®ÎìàÏùÑ ÎßåÎì§Ïñ¥ ÌîåÎû´ÌèºÏùò Í∏∞Îä•ÏùÑ ÌôïÏû•Ìï† Ïàò ÏûàÎèÑÎ°ù ÎèÑÏôÄÎìúÎ¶ΩÎãàÎã§.

### Ïôú Ïª§Ïä§ÌÖÄ Î™®ÎìàÏù∏Í∞Ä?

- **ÌäπÌôîÎêú Ïã§Ìóò ÏÑ§Í≥Ñ**: Ïó¨Îü¨Î∂ÑÏùò Ïó∞Íµ¨ Î∂ÑÏïºÏóê ÌäπÌôîÎêú Ïã§Ìóò ÏÑ§Í≥ÑÎ≤ï Íµ¨ÌòÑ
- **Ïª§Ïä§ÌÑ∞ÎßàÏù¥Ïßï**: Ï°∞ÏßÅÏù¥ÎÇò Ïó∞Íµ¨Ïã§ÎßåÏùò Í≥†Ïú†Ìïú ÌîÑÎ°úÌÜ†ÏΩú Î∞òÏòÅ
- **Í≥µÏú†ÏôÄ ÌòëÏóÖ**: Îã§Î•∏ Ïó∞Íµ¨ÏûêÎì§Í≥º Î™®Îìà Í≥µÏú†
- **ÏßÄÏÜçÏ†Å Í∞úÏÑ†**: Ïª§ÎÆ§ÎãàÌã∞ ÌîºÎìúÎ∞±ÏùÑ ÌÜµÌïú Î™®Îìà Í∞úÏÑ†

---

## üöÄ Îπ†Î•∏ ÏãúÏûë

### 1Îã®Í≥Ñ: Í∏∞Î≥∏ Î™®Îìà Íµ¨Ï°∞

Î™®Îì† Ïª§Ïä§ÌÖÄ Î™®ÎìàÏùÄ `BaseExperimentModule`ÏùÑ ÏÉÅÏÜçÎ∞õÏïÑÏïº Ìï©ÎãàÎã§:

```python
from modules.base_module import (
    BaseExperimentModule, Factor, Response, ExperimentDesign, 
    AnalysisResult, ValidationResult
)
from typing import List, Dict, Any, Optional
import pandas as pd
import numpy as np

class MyCustomModule(BaseExperimentModule):
    """ÎÇòÎßåÏùò Ïã§Ìóò Î™®Îìà"""
    
    def __init__(self):
        """Î™®Îìà Ï¥àÍ∏∞Ìôî"""
        super().__init__()
        self.metadata.update({
            'name': 'ÎÇ¥ Ïª§Ïä§ÌÖÄ Ïã§Ìóò Î™®Îìà',
            'version': '1.0.0',
            'author': 'ÌôçÍ∏∏Îèô',
            'description': 'ÌäπÏàòÌïú Ïö©ÎèÑÏùò Ïã§Ìóò ÏÑ§Í≥Ñ Î™®Îìà',
            'category': 'custom',
            'tags': ['polymer', 'optimization', 'custom'],
            'icon': 'üî¨',
            'color': '#FF6B6B'
        })
```

### 2Îã®Í≥Ñ: ÌïÑÏàò Î©îÏÑúÎìú Íµ¨ÌòÑ

Î™®Îì† Î™®ÎìàÏùÄ Îã§Ïùå Ï∂îÏÉÅ Î©îÏÑúÎìúÎì§ÏùÑ Î∞òÎìúÏãú Íµ¨ÌòÑÌï¥Ïïº Ìï©ÎãàÎã§:

```python
def get_factors(self) -> List[Factor]:
    """Ïã§Ìóò ÏöîÏù∏ Î™©Î°ù Î∞òÌôò"""
    return [
        Factor(
            name='Ïò®ÎèÑ',
            type='continuous',
            unit='¬∞C',
            min_value=20,
            max_value=200,
            description='Î∞òÏùë Ïò®ÎèÑ'
        ),
        Factor(
            name='ÏãúÍ∞Ñ',
            type='continuous',
            unit='min',
            min_value=10,
            max_value=120,
            description='Î∞òÏùë ÏãúÍ∞Ñ'
        ),
        Factor(
            name='Ï¥âÎß§',
            type='categorical',
            levels=['A', 'B', 'C'],
            description='Ï¥âÎß§ Ï¢ÖÎ•ò'
        )
    ]

def get_responses(self) -> List[Response]:
    """Î∞òÏùëÎ≥ÄÏàò Î™©Î°ù Î∞òÌôò"""
    return [
        Response(
            name='ÏàòÏú®',
            unit='%',
            goal='maximize',
            target_value=95,
            lower_limit=0,
            upper_limit=100
        ),
        Response(
            name='ÏàúÎèÑ',
            unit='%',
            goal='maximize',
            target_value=99,
            lower_limit=0,
            upper_limit=100
        )
    ]

def validate_input(self, inputs: Dict[str, Any]) -> ValidationResult:
    """ÏûÖÎ†•Í∞í Í≤ÄÏ¶ù"""
    result = ValidationResult()
    
    # ÏöîÏù∏ Í≤ÄÏ¶ù
    factors = inputs.get('factors', [])
    if len(factors) < 2:
        result.add_error("ÏµúÏÜå 2Í∞ú Ïù¥ÏÉÅÏùò ÏöîÏù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.")
    
    # Ïã§Ìóò ÌöüÏàò Í≤ÄÏ¶ù
    n_runs = inputs.get('n_runs', 0)
    if n_runs < 4:
        result.add_warning("Ïã†Î¢∞Ìï† Ïàò ÏûàÎäî Í≤∞Í≥ºÎ•º ÏúÑÌï¥ ÏµúÏÜå 4Ìöå Ïù¥ÏÉÅÏùò Ïã§ÌóòÏùÑ Í∂åÏû•Ìï©ÎãàÎã§.")
    
    return result

def generate_design(self, inputs: Dict[str, Any]) -> ExperimentDesign:
    """Ïã§Ìóò ÏÑ§Í≥Ñ ÏÉùÏÑ±"""
    from pyDOE3 import fullfact, ccdesign, bbdesign
    
    design_type = inputs.get('design_type', 'full_factorial')
    factors = inputs.get('factors', [])
    
    # ÏÑ§Í≥Ñ Îß§Ìä∏Î¶≠Ïä§ ÏÉùÏÑ±
    if design_type == 'full_factorial':
        levels = [f.get('levels', 2) for f in factors]
        design_matrix = fullfact(levels)
    elif design_type == 'central_composite':
        n_factors = len(factors)
        design_matrix = ccdesign(n_factors)
    else:
        # Í∏∞Î≥∏Í∞í: Box-Behnken
        n_factors = len(factors)
        design_matrix = bbdesign(n_factors)
    
    # ExperimentDesign Í∞ùÏ≤¥ ÏÉùÏÑ±
    design = ExperimentDesign(
        design_type=design_type,
        factors=[Factor(**f) for f in factors],
        responses=self.get_responses(),
        runs=pd.DataFrame(design_matrix, columns=[f['name'] for f in factors]),
        metadata={'generated_by': self.metadata['name']}
    )
    
    return design

def analyze_results(self, design: ExperimentDesign, 
                   results_data: pd.DataFrame) -> AnalysisResult:
    """Í≤∞Í≥º Î∂ÑÏÑù"""
    import statsmodels.api as sm
    from scipy import stats
    
    # Í∏∞Î≥∏ ÌÜµÍ≥Ñ Î∂ÑÏÑù
    summary_stats = results_data.describe()
    
    # ÌöåÍ∑Ä Î∂ÑÏÑù (ÏòàÏãú)
    X = design.runs
    y = results_data.iloc[:, 0]  # Ï≤´ Î≤àÏß∏ Î∞òÏùëÎ≥ÄÏàò
    
    X_with_const = sm.add_constant(X)
    model = sm.OLS(y, X_with_const).fit()
    
    # Î∂ÑÏÑù Í≤∞Í≥º Í∞ùÏ≤¥ ÏÉùÏÑ±
    analysis = AnalysisResult(
        summary_statistics=summary_stats.to_dict(),
        regression_results={
            'coefficients': model.params.to_dict(),
            'p_values': model.pvalues.to_dict(),
            'r_squared': model.rsquared
        },
        anova_results=None,  # ÌïÑÏöîÏãú Íµ¨ÌòÑ
        optimization_results=None,  # ÌïÑÏöîÏãú Íµ¨ÌòÑ
        predictions=None,  # ÌïÑÏöîÏãú Íµ¨ÌòÑ
        recommendations=["Îçî ÎßéÏùÄ Ï§ëÏã¨Ï†êÏùÑ Ï∂îÍ∞ÄÌïòÏó¨ Í≥°Î•†ÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî."]
    )
    
    return analysis
```

---

## üìã ÏÉÅÏÑ∏ Í∞úÎ∞ú Í∞ÄÏù¥Îìú

### 1. Îç∞Ïù¥ÌÑ∞ Î™®Îç∏ Ïù¥Ìï¥ÌïòÍ∏∞

#### Factor (ÏöîÏù∏) ÌÅ¥ÎûòÏä§
```python
Factor(
    name: str,              # ÏöîÏù∏ Ïù¥Î¶Ñ (ÌïÑÏàò)
    type: str,              # 'continuous' ÎòêÎäî 'categorical' (ÌïÑÏàò)
    unit: Optional[str],    # Îã®ÏúÑ (Ïòà: '¬∞C', 'min', 'g/L')
    min_value: Optional[float],  # ÏµúÏÜåÍ∞í (Ïó∞ÏÜçÌòï)
    max_value: Optional[float],  # ÏµúÎåÄÍ∞í (Ïó∞ÏÜçÌòï)
    levels: Optional[List],      # ÏàòÏ§Ä Î™©Î°ù (Î≤îÏ£ºÌòï)
    description: Optional[str],  # ÏÑ§Î™Ö
    constraints: Optional[Dict]  # Ï†úÏïΩÏ°∞Í±¥
)
```

#### Response (Î∞òÏùëÎ≥ÄÏàò) ÌÅ¥ÎûòÏä§
```python
Response(
    name: str,              # Î∞òÏùëÎ≥ÄÏàò Ïù¥Î¶Ñ (ÌïÑÏàò)
    unit: Optional[str],    # Îã®ÏúÑ
    goal: str,              # 'maximize', 'minimize', 'target'
    target_value: Optional[float],  # Î™©ÌëúÍ∞í
    lower_limit: Optional[float],   # ÌïòÌïú
    upper_limit: Optional[float],   # ÏÉÅÌïú
    weight: float = 1.0,    # Ï§ëÏöîÎèÑ Í∞ÄÏ§ëÏπò
    description: Optional[str]      # ÏÑ§Î™Ö
)
```

#### ExperimentDesign (Ïã§Ìóò ÏÑ§Í≥Ñ) ÌÅ¥ÎûòÏä§
```python
ExperimentDesign(
    design_type: str,       # ÏÑ§Í≥Ñ Ïú†Ìòï
    factors: List[Factor],  # ÏöîÏù∏ Î™©Î°ù
    responses: List[Response],  # Î∞òÏùëÎ≥ÄÏàò Î™©Î°ù
    runs: pd.DataFrame,     # Ïã§Ìóò Îü∞ ÌÖåÏù¥Î∏î
    metadata: Optional[Dict],   # Î©îÌÉÄÎç∞Ïù¥ÌÑ∞
    constraints: Optional[Dict], # Ï†úÏïΩÏ°∞Í±¥
    blocks: Optional[List],     # Î∏îÎ°ù Ï†ïÎ≥¥
    center_points: int = 0      # Ï§ëÏã¨Ï†ê Í∞úÏàò
)
```

### 2. Í≥†Í∏â Í∏∞Îä• Íµ¨ÌòÑ

#### 2.1 AI ÌÜµÌï©
```python
def get_ai_recommendations(self, inputs: Dict[str, Any]) -> Dict[str, Any]:
    """AI Í∏∞Î∞ò Ï∂îÏ≤ú ÏÉùÏÑ±"""
    from utils.api_manager import APIManager
    
    api_manager = APIManager()
    
    prompt = f"""
    Îã§Ïùå Ïã§Ìóò Ï°∞Í±¥Ïóê ÎåÄÌïú ÏµúÏ†ÅÏùò ÏÑ§Í≥ÑÎ•º Ï∂îÏ≤úÌï¥Ï£ºÏÑ∏Ïöî:
    - ÏöîÏù∏: {inputs.get('factors')}
    - Î™©Ìëú: {inputs.get('objectives')}
    - Ï†úÏïΩÏÇ¨Ìï≠: {inputs.get('constraints')}
    
    Îã§ÏùåÏùÑ Ìè¨Ìï®Ìï¥ÏÑú ÎãµÎ≥ÄÌï¥Ï£ºÏÑ∏Ïöî:
    1. Ï∂îÏ≤ú ÏÑ§Í≥Ñ Î∞©Î≤ï Î∞è Ïù¥Ïú†
    2. ÏòàÏÉÅ Ïã§Ìóò ÌöüÏàò
    3. Ï£ºÏùòÏÇ¨Ìï≠
    """
    
    response = api_manager.query_ai(prompt, service='google_gemini')
    
    return {
        'recommendations': response,
        'confidence': 0.85
    }
```

#### 2.2 ÏÇ¨Ïö©Ïûê Ï†ïÏùò ÏÑ§Í≥Ñ Î∞©Î≤ï
```python
def _custom_design_method(self, factors: List[Factor], 
                         n_runs: int) -> np.ndarray:
    """ÏÇ¨Ïö©Ïûê Ï†ïÏùò ÏÑ§Í≥Ñ Î∞©Î≤ï Íµ¨ÌòÑ"""
    # Ïó¨Í∏∞Ïóê ÎèÖÏûêÏ†ÅÏù∏ ÏÑ§Í≥Ñ ÏïåÍ≥†Î¶¨Ï¶ò Íµ¨ÌòÑ
    # Ïòà: Ï†ÅÏùëÏ†Å ÏÑ§Í≥Ñ, ÏàúÏ∞®Ï†Å ÏÑ§Í≥Ñ Îì±
    
    # D-optimal ÏÑ§Í≥Ñ ÏòàÏãú
    from pyDOE3 import doe_lhs
    
    n_factors = len(factors)
    # Latin Hypercube SamplingÏúºÎ°ú Ï¥àÍ∏∞ ÏÑ§Í≥Ñ
    initial_design = doe_lhs.lhs(n_factors, samples=n_runs)
    
    # ÏÑ§Í≥Ñ ÏµúÏ†ÅÌôî (D-optimality)
    optimized_design = self._optimize_design(initial_design, factors)
    
    return optimized_design
```

#### 2.3 ÏãúÍ∞ÅÌôî ÌÜµÌï©
```python
def create_visualization(self, design: ExperimentDesign) -> Dict[str, Any]:
    """ÏÑ§Í≥Ñ ÏãúÍ∞ÅÌôî ÏÉùÏÑ±"""
    import plotly.graph_objects as go
    
    figures = {}
    
    # 2D ÏÑ§Í≥Ñ Í≥µÍ∞Ñ (Ï≤òÏùå Îëê ÏöîÏù∏)
    if len(design.factors) >= 2:
        factor1 = design.factors[0]
        factor2 = design.factors[1]
        
        fig = go.Figure(data=[go.Scatter(
            x=design.runs[factor1.name],
            y=design.runs[factor2.name],
            mode='markers',
            marker=dict(
                size=10,
                color='blue',
                line=dict(width=1, color='darkblue')
            ),
            text=[f"Run {i+1}" for i in range(len(design.runs))],
            hovertemplate='%{text}<br>%{x}<br>%{y}<extra></extra>'
        )])
        
        fig.update_layout(
            title='Ïã§Ìóò ÏÑ§Í≥Ñ Í≥µÍ∞Ñ',
            xaxis_title=f"{factor1.name} ({factor1.unit})" if factor1.unit else factor1.name,
            yaxis_title=f"{factor2.name} ({factor2.unit})" if factor2.unit else factor2.name,
            hovermode='closest'
        )
        
        figures['design_space_2d'] = fig
    
    # 3D ÏÑ§Í≥Ñ Í≥µÍ∞Ñ (Ï≤òÏùå ÏÑ∏ ÏöîÏù∏)
    if len(design.factors) >= 3:
        factor3 = design.factors[2]
        
        fig3d = go.Figure(data=[go.Scatter3d(
            x=design.runs[factor1.name],
            y=design.runs[factor2.name],
            z=design.runs[factor3.name],
            mode='markers',
            marker=dict(size=8, color='red')
        )])
        
        fig3d.update_layout(
            title='3D Ïã§Ìóò ÏÑ§Í≥Ñ Í≥µÍ∞Ñ',
            scene=dict(
                xaxis_title=factor1.name,
                yaxis_title=factor2.name,
                zaxis_title=factor3.name
            )
        )
        
        figures['design_space_3d'] = fig3d
    
    return figures
```

### 3. Í≥†Î∂ÑÏûê ÌäπÌôî Î™®Îìà ÏòàÏ†ú

```python
class PolymerDissolutionModule(BaseExperimentModule):
    """Í≥†Î∂ÑÏûê Ïö©Ìï¥ Ïã§Ìóò Î™®Îìà"""
    
    def __init__(self):
        super().__init__()
        self.metadata.update({
            'name': 'Í≥†Î∂ÑÏûê Ïö©Ìï¥ ÏµúÏ†ÅÌôî',
            'version': '1.0.0',
            'author': 'Ìè¥Î¶¨Î®∏Îû©',
            'description': 'Í≥†Î∂ÑÏûê Ïö©Îß§ ÏãúÏä§ÌÖú ÏµúÏ†ÅÌôîÎ•º ÏúÑÌïú Ïã§Ìóò ÏÑ§Í≥Ñ',
            'category': 'polymer',
            'tags': ['polymer', 'dissolution', 'solvent', 'optimization'],
            'icon': 'üß™',
            'color': '#9C27B0'
        })
    
    def get_factors(self) -> List[Factor]:
        """Í≥†Î∂ÑÏûê Ïö©Ìï¥ Í¥ÄÎ†® ÏöîÏù∏"""
        return [
            Factor(
                name='Ï£ºÏö©Îß§',
                type='categorical',
                levels=['THF', 'CHCl3', 'DMF', 'DMSO'],
                description='Ï£º Ïö©Îß§ ÏÑ†ÌÉù'
            ),
            Factor(
                name='Î≥¥Ï°∞Ïö©Îß§_ÎπÑÏú®',
                type='continuous',
                unit='%',
                min_value=0,
                max_value=50,
                description='Î≥¥Ï°∞Ïö©Îß§ ÌòºÌï© ÎπÑÏú®'
            ),
            Factor(
                name='Ïò®ÎèÑ',
                type='continuous',
                unit='¬∞C',
                min_value=20,
                max_value=80,
                description='Ïö©Ìï¥ Ïò®ÎèÑ'
            ),
            Factor(
                name='ÍµêÎ∞òÏÜçÎèÑ',
                type='continuous',
                unit='rpm',
                min_value=100,
                max_value=1000,
                description='ÍµêÎ∞ò ÏÜçÎèÑ'
            ),
            Factor(
                name='Ïö©Ìï¥ÏãúÍ∞Ñ',
                type='continuous',
                unit='h',
                min_value=0.5,
                max_value=24,
                description='Ïö©Ìï¥ ÏãúÍ∞Ñ'
            )
        ]
    
    def get_responses(self) -> List[Response]:
        """Í≥†Î∂ÑÏûê Ïö©Ìï¥ Í¥ÄÎ†® Î∞òÏùëÎ≥ÄÏàò"""
        return [
            Response(
                name='Ïö©Ìï¥ÎèÑ',
                unit='g/L',
                goal='maximize',
                target_value=100,
                lower_limit=0,
                description='Í≥†Î∂ÑÏûê Ïö©Ìï¥ÎèÑ'
            ),
            Response(
                name='Ïö©Ïï°Ï†êÎèÑ',
                unit='cP',
                goal='target',
                target_value=1000,
                lower_limit=100,
                upper_limit=5000,
                description='Ïö©Ïï° Ï†êÎèÑ'
            ),
            Response(
                name='ÏÉÅÎ∂ÑÎ¶¨ÏãúÍ∞Ñ',
                unit='h',
                goal='maximize',
                lower_limit=24,
                description='Ïö©Ïï° ÏïàÏ†ïÏÑ± (ÏÉÅÎ∂ÑÎ¶¨ÍπåÏßÄ ÏãúÍ∞Ñ)'
            )
        ]
    
    def validate_input(self, inputs: Dict[str, Any]) -> ValidationResult:
        """Í≥†Î∂ÑÏûê ÌäπÌôî Í≤ÄÏ¶ù"""
        result = super().validate_input(inputs)
        
        # Ïò®ÎèÑ-Ïö©Îß§ Ìò∏ÌôòÏÑ± Í≤ÄÏ¶ù
        factors = {f['name']: f for f in inputs.get('factors', [])}
        
        if 'Ï£ºÏö©Îß§' in factors and 'Ïò®ÎèÑ' in factors:
            solvent = factors['Ï£ºÏö©Îß§'].get('selected_level')
            temp = factors['Ïò®ÎèÑ'].get('max_value', 0)
            
            # Ïö©Îß§Î≥Ñ ÎÅìÎäîÏ†ê Ï≤¥ÌÅ¨
            boiling_points = {
                'THF': 66,
                'CHCl3': 61,
                'DMF': 153,
                'DMSO': 189
            }
            
            if solvent in boiling_points and temp > boiling_points[solvent] - 10:
                result.add_warning(
                    f"{solvent}Ïùò ÎÅìÎäîÏ†ê({boiling_points[solvent]}¬∞C)Ïóê Í∞ÄÍπåÏö¥ Ïò®ÎèÑÏûÖÎãàÎã§. "
                    "ÌôòÎ•ò ÎÉâÍ∞ÅÍ∏∞ ÏÇ¨Ïö©ÏùÑ Í∂åÏû•Ìï©ÎãàÎã§."
                )
        
        return result
    
    def _suggest_solvent_system(self, polymer_type: str) -> List[str]:
        """Í≥†Î∂ÑÏûê Ï¢ÖÎ•òÏóê Îî∞Î•∏ Ïö©Îß§ ÏãúÏä§ÌÖú Ï†úÏïà"""
        solvent_database = {
            'PS': ['THF', 'toluene', 'CHCl3'],
            'PMMA': ['acetone', 'THF', 'CHCl3'],
            'PLA': ['CHCl3', 'DCM', 'dioxane'],
            'Nylon': ['formic acid', 'TFA', 'phenol'],
            'PEO': ['water', 'CHCl3', 'acetonitrile']
        }
        
        return solvent_database.get(polymer_type, ['THF', 'CHCl3', 'DMF'])
```

---

## üîí Î≥¥Ïïà Í∞ÄÏù¥ÎìúÎùºÏù∏

### Í∏àÏßÄÎêú ÏûëÏóÖ

Ïª§Ïä§ÌÖÄ Î™®ÎìàÏóêÏÑúÎäî Îã§Ïùå ÏûëÏóÖÏù¥ Ï†úÌïúÎê©ÎãàÎã§:

```python
# ‚ùå Í∏àÏßÄÎêú ÏòàÏãú
import os
os.system('command')  # ÏãúÏä§ÌÖú Î™ÖÎ†π Ïã§Ìñâ Í∏àÏßÄ

import subprocess  # ÌîÑÎ°úÏÑ∏Ïä§ ÏÉùÏÑ± Í∏àÏßÄ

eval('code')  # ÎèôÏ†Å ÏΩîÎìú Ïã§Ìñâ Í∏àÏßÄ
exec('code')

# ÌååÏùº ÏãúÏä§ÌÖú ÏßÅÏ†ë Ï†ëÍ∑º Ï†úÌïú
open('/etc/passwd', 'r')
```

### ÌóàÏö©Îêú ÏûëÏóÖ

```python
# ‚úÖ ÌóàÏö©Îêú ÏòàÏãú
import numpy as np  # ÏàòÏπò Í≥ÑÏÇ∞
import pandas as pd  # Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
import scipy  # Í≥ºÌïô Í≥ÑÏÇ∞
from pyDOE3 import *  # Ïã§Ìóò ÏÑ§Í≥Ñ

# ÌîåÎû´Ìèº Ï†úÍ≥µ API ÏÇ¨Ïö©
from utils.data_processor import DataProcessor
from utils.api_manager import APIManager
```

---

## üß™ ÌÖåÏä§Ìä∏ Í∞ÄÏù¥Îìú

### Îã®ÏúÑ ÌÖåÏä§Ìä∏ ÏûëÏÑ±

```python
# test_my_module.py

import unittest
import pandas as pd
import numpy as np
from modules.user_modules.my_custom_module import MyCustomModule

class TestMyCustomModule(unittest.TestCase):
    
    def setUp(self):
        """ÌÖåÏä§Ìä∏ Ï§ÄÎπÑ"""
        self.module = MyCustomModule()
        self.test_inputs = {
            'design_type': 'full_factorial',
            'factors': [
                {
                    'name': 'Ïò®ÎèÑ',
                    'type': 'continuous',
                    'min_value': 20,
                    'max_value': 100,
                    'levels': 3
                },
                {
                    'name': 'ÏãúÍ∞Ñ',
                    'type': 'continuous',
                    'min_value': 10,
                    'max_value': 60,
                    'levels': 3
                }
            ],
            'responses': [
                {'name': 'ÏàòÏú®', 'goal': 'maximize'}
            ],
            'n_runs': 9
        }
    
    def test_initialization(self):
        """Î™®Îìà Ï¥àÍ∏∞Ìôî ÌÖåÏä§Ìä∏"""
        self.assertIsNotNone(self.module.metadata)
        self.assertEqual(self.module.metadata['name'], 'ÎÇ¥ Ïª§Ïä§ÌÖÄ Ïã§Ìóò Î™®Îìà')
        self.assertIn('version', self.module.metadata)
    
    def test_factor_generation(self):
        """ÏöîÏù∏ ÏÉùÏÑ± ÌÖåÏä§Ìä∏"""
        factors = self.module.get_factors()
        self.assertIsInstance(factors, list)
        self.assertGreater(len(factors), 0)
        
        # Ï≤´ Î≤àÏß∏ ÏöîÏù∏ Í≤ÄÏ¶ù
        first_factor = factors[0]
        self.assertIn('name', first_factor.__dict__)
        self.assertIn('type', first_factor.__dict__)
    
    def test_input_validation(self):
        """ÏûÖÎ†• Í≤ÄÏ¶ù ÌÖåÏä§Ìä∏"""
        # Ï†ïÏÉÅ ÏûÖÎ†•
        result = self.module.validate_input(self.test_inputs)
        self.assertTrue(result.is_valid)
        
        # ÎπÑÏ†ïÏÉÅ ÏûÖÎ†• (ÏöîÏù∏ Î∂ÄÏ°±)
        invalid_inputs = {
            'factors': [{'name': 'Ïò®ÎèÑ', 'type': 'continuous'}],
            'n_runs': 2
        }
        result = self.module.validate_input(invalid_inputs)
        self.assertFalse(result.is_valid)
        self.assertGreater(len(result.errors), 0)
    
    def test_design_generation(self):
        """ÏÑ§Í≥Ñ ÏÉùÏÑ± ÌÖåÏä§Ìä∏"""
        design = self.module.generate_design(self.test_inputs)
        
        self.assertIsNotNone(design)
        self.assertIsInstance(design.runs, pd.DataFrame)
        self.assertEqual(len(design.runs), 9)  # 3x3 ÏôÑÏ†ÑÏöîÏù∏ÏÑ§Í≥Ñ
        self.assertEqual(len(design.runs.columns), 2)  # 2Í∞ú ÏöîÏù∏
    
    def test_results_analysis(self):
        """Í≤∞Í≥º Î∂ÑÏÑù ÌÖåÏä§Ìä∏"""
        # ÏÑ§Í≥Ñ ÏÉùÏÑ±
        design = self.module.generate_design(self.test_inputs)
        
        # Í∞ÄÏÉÅÏùò Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞ ÏÉùÏÑ±
        np.random.seed(42)
        results_data = pd.DataFrame({
            'ÏàòÏú®': np.random.normal(80, 10, len(design.runs))
        })
        
        # Î∂ÑÏÑù Ïã§Ìñâ
        analysis = self.module.analyze_results(design, results_data)
        
        self.assertIsNotNone(analysis)
        self.assertIn('summary_statistics', analysis.dict())
        self.assertIn('regression_results', analysis.dict())
    
    def test_edge_cases(self):
        """Ïó£ÏßÄ ÏºÄÏù¥Ïä§ ÌÖåÏä§Ìä∏"""
        # Îπà ÏûÖÎ†•
        empty_result = self.module.validate_input({})
        self.assertFalse(empty_result.is_valid)
        
        # Í∑πÎã®Ï†ÅÏù∏ Í∞í
        extreme_inputs = {
            'factors': [
                {
                    'name': 'A',
                    'type': 'continuous',
                    'min_value': -1000,
                    'max_value': 1000
                }
            ] * 10,  # 10Í∞ú ÏöîÏù∏
            'n_runs': 1000  # ÎßéÏùÄ Ïã§Ìóò ÌöüÏàò
        }
        result = self.module.validate_input(extreme_inputs)
        self.assertGreater(len(result.warnings), 0)

if __name__ == '__main__':
    unittest.main()
```

### ÌÜµÌï© ÌÖåÏä§Ìä∏

ÌîåÎû´ÌèºÍ≥ºÏùò ÌÜµÌï©ÏùÑ ÌÖåÏä§Ìä∏ÌïòÎ†§Î©¥:

1. Î™®ÎìàÏùÑ `modules/user_modules/{your_user_id}/` Ìè¥ÎçîÏóê Ï†ÄÏû•
2. ÌîåÎû´ÌèºÏùÑ Ïû¨ÏãúÏûëÌïòÍ±∞ÎÇò Ìï´ Î¶¨Î°úÎìú Í∏∞Îä• ÏÇ¨Ïö©
3. UIÏóêÏÑú Î™®ÎìàÏù¥ ÎÇòÌÉÄÎÇòÎäîÏßÄ ÌôïÏù∏
4. Ïã§Ï†ú Ïã§Ìóò ÏÑ§Í≥Ñ ÏàòÌñâ ÌÖåÏä§Ìä∏

---

## üì¶ Î∞∞Ìè¨ Î∞è Í≥µÏú†

### 1. Î°úÏª¨ ÏÑ§Ïπò

```bash
# Î™®Îìà ÌååÏùºÏùÑ ÏÇ¨Ïö©Ïûê Î™®Îìà ÎîîÎ†âÌÜ†Î¶¨Ïóê Î≥µÏÇ¨
cp my_custom_module.py ~/UniversalDOE/modules/user_modules/{user_id}/
```

### 2. Î™®Îìà Ìå®ÌÇ§Ïßï

```yaml
# module.yaml
name: My Custom Module
version: 1.0.0
author: Hong Gil Dong
email: hong@example.com
files:
  - my_custom_module.py
  - helpers.py
  - data/templates.json
dependencies:
  - numpy>=1.20.0
  - scipy>=1.7.0
  - pyDOE3>=1.0.0
test_files:
  - test_my_module.py
documentation:
  - README.md
  - examples/
license: MIT
```

### 3. ÎßàÏºìÌîåÎ†àÏù¥Ïä§ ÏóÖÎ°úÎìú

1. ÌîåÎû´Ìèº UIÏóêÏÑú "Î™®Îìà ÏóÖÎ°úÎìú" ÏÑ†ÌÉù
2. Î™®Îìà ÌååÏùº Î∞è Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ
3. ÏûêÎèô Í≤ÄÏ¶ù ÌÜµÍ≥º
4. Ïª§ÎÆ§ÎãàÌã∞ Î¶¨Î∑∞ Í∏∞Í∞Ñ (ÏÑ†ÌÉùÏ†Å)
5. Í≥µÍ∞ú Î∞è Í≥µÏú†

---

## üí° Î™®Î≤î ÏÇ¨Î°Ä

### 1. Î™ÖÌôïÌïú Î¨∏ÏÑúÌôî

```python
def my_method(self, param1: float, param2: str) -> Dict[str, Any]:
    """
    Î©îÏÑúÎìúÏùò Í∏∞Îä•ÏùÑ Î™ÖÌôïÌûà ÏÑ§Î™Ö
    
    Parameters
    ----------
    param1 : float
        Ï≤´ Î≤àÏß∏ Îß§Í∞úÎ≥ÄÏàò ÏÑ§Î™Ö (Î≤îÏúÑ: 0-100)
    param2 : str
        Îëê Î≤àÏß∏ Îß§Í∞úÎ≥ÄÏàò ÏÑ§Î™Ö (ÏòµÏÖò: 'A', 'B', 'C')
        
    Returns
    -------
    Dict[str, Any]
        Î∞òÌôòÍ∞í ÏÑ§Î™Ö
        - 'result': Í≥ÑÏÇ∞ Í≤∞Í≥º (float)
        - 'status': ÏÉÅÌÉú ÏΩîÎìú (str)
        
    Raises
    ------
    ValueError
        param1Ïù¥ Î≤îÏúÑÎ•º Î≤óÏñ¥ÎÇú Í≤ΩÏö∞
        
    Examples
    --------
    >>> module.my_method(50.0, "A")
    {'result': 100.0, 'status': 'success'}
    """
    # Íµ¨ÌòÑ
    pass
```

### 2. Í∞ïÍ±¥Ìïú ÏóêÎü¨ Ï≤òÎ¶¨

```python
def risky_operation(self, data: pd.DataFrame) -> Optional[Dict]:
    """ÏúÑÌóòÌï† Ïàò ÏûàÎäî ÏûëÏóÖ ÏàòÌñâ"""
    try:
        # ÏûÖÎ†• Í≤ÄÏ¶ù
        if data.empty:
            self.logger.warning("Îπà Îç∞Ïù¥ÌÑ∞ÌîÑÎ†àÏûÑÏù¥ ÏûÖÎ†•ÎêòÏóàÏäµÎãàÎã§.")
            return None
        
        # Í≥ÑÏÇ∞ ÏàòÌñâ
        result = self._complex_calculation(data)
        
        # Í≤∞Í≥º Í≤ÄÏ¶ù
        if not self._validate_result(result):
            raise ValueError("Í≥ÑÏÇ∞ Í≤∞Í≥ºÍ∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÏäµÎãàÎã§.")
        
        return result
        
    except ValueError as e:
        # ÏòàÏÉÅÎêú ÏóêÎü¨ Ï≤òÎ¶¨
        self.logger.error(f"Í≥ÑÏÇ∞ Ïò§Î•ò: {str(e)}")
        return None
        
    except Exception as e:
        # ÏòàÏÉÅÏπò Î™ªÌïú ÏóêÎü¨
        self.logger.error(f"ÏòàÏÉÅÏπò Î™ªÌïú Ïò§Î•ò: {str(e)}")
        raise
```

### 3. ÏÑ±Îä• ÏµúÏ†ÅÌôî

```python
def process_large_dataset(self, data: pd.DataFrame, chunk_size: int = 1000):
    """ÎåÄÏö©Îüâ Îç∞Ïù¥ÌÑ∞ÏÖã Ï≤òÎ¶¨"""
    # Î©îÎ™®Î¶¨ Ìö®Ïú®Ï†ÅÏù∏ Ï≤≠ÌÅ¨ Ï≤òÎ¶¨
    results = []
    
    with tqdm(total=len(data), desc="Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Ï§ë") as pbar:
        for i in range(0, len(data), chunk_size):
            chunk = data.iloc[i:i+chunk_size]
            
            # Ï≤≠ÌÅ¨Î≥Ñ Ï≤òÎ¶¨
            chunk_result = self._process_chunk(chunk)
            results.append(chunk_result)
            
            # ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
            pbar.update(len(chunk))
            
            # Î©îÎ™®Î¶¨ Ï†ïÎ¶¨
            if i % (chunk_size * 10) == 0:
                import gc
                gc.collect()
    
    # Í≤∞Í≥º ÌÜµÌï©
    return pd.concat(results, ignore_index=True)
```

### 4. ÏÑ§Ï†ï Í∞ÄÎä•Ìïú Î™®Îìà

```python
class ConfigurableModule(BaseExperimentModule):
    """ÏÑ§Ï†ï Í∞ÄÎä•Ìïú Î™®Îìà ÏòàÏ†ú"""
    
    def __init__(self):
        super().__init__()
        # Í∏∞Î≥∏ ÏÑ§Ï†ï
        self.config = {
            'default_design_type': 'central_composite',
            'min_runs': 4,
            'max_runs': 1000,
            'optimization_algorithm': 'sequential',
            'confidence_level': 0.95,
            'allow_constraints': True,
            'enable_ai_assist': True
        }
    
    def update_config(self, new_config: Dict[str, Any]):
        """ÏÑ§Ï†ï ÏóÖÎç∞Ïù¥Ìä∏"""
        # Ïú†Ìö®Ìïú ÏÑ§Ï†ïÎßå ÏóÖÎç∞Ïù¥Ìä∏
        valid_keys = set(self.config.keys())
        for key, value in new_config.items():
            if key in valid_keys:
                self.config[key] = value
                self.logger.info(f"ÏÑ§Ï†ï ÏóÖÎç∞Ïù¥Ìä∏: {key} = {value}")
            else:
                self.logger.warning(f"Ïïå Ïàò ÏóÜÎäî ÏÑ§Ï†ï ÌÇ§: {key}")
    
    def get_config_schema(self) -> Dict[str, Any]:
        """ÏÑ§Ï†ï Ïä§ÌÇ§Îßà Î∞òÌôò (UI ÏÉùÏÑ±Ïö©)"""
        return {
            'default_design_type': {
                'type': 'select',
                'options': ['full_factorial', 'central_composite', 'box_behnken'],
                'default': 'central_composite',
                'description': 'Í∏∞Î≥∏ Ïã§Ìóò ÏÑ§Í≥Ñ Î∞©Î≤ï'
            },
            'confidence_level': {
                'type': 'slider',
                'min': 0.8,
                'max': 0.99,
                'step': 0.01,
                'default': 0.95,
                'description': 'ÌÜµÍ≥ÑÏ†Å Ïã†Î¢∞ ÏàòÏ§Ä'
            }
        }
```

---

## üÜò Î¨∏Ï†ú Ìï¥Í≤∞

### ÏûêÏ£º Î∞úÏÉùÌïòÎäî Î¨∏Ï†ú

1. **ModuleNotFoundError**
   ```python
   # Î¨∏Ï†ú: ImportError: No module named 'my_helper'
   # Ìï¥Í≤∞: ÏÉÅÎåÄ Í≤ΩÎ°ú ÏÇ¨Ïö©
   from .my_helper import helper_function  # ÎèôÏùº ÎîîÎ†âÌÜ†Î¶¨
   ```

2. **ValidationError**
   ```python
   # Î¨∏Ï†ú: "ÌïÑÏàò Î©îÏÑúÎìú 'get_factors'Í∞Ä Íµ¨ÌòÑÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§"
   # Ìï¥Í≤∞: Î™®Îì† Ï∂îÏÉÅ Î©îÏÑúÎìú Íµ¨ÌòÑ ÌôïÏù∏
   def get_factors(self) -> List[Factor]:
       return []  # ÏµúÏÜåÌïú Îπà Î¶¨Ïä§Ìä∏ÎùºÎèÑ Î∞òÌôò
   ```

3. **SecurityError**
   ```python
   # Î¨∏Ï†ú: "Í∏àÏßÄÎêú Î™®Îìà 'os'Î•º importÌï† Ïàò ÏóÜÏäµÎãàÎã§"
   # Ìï¥Í≤∞: ÌîåÎû´Ìèº Ï†úÍ≥µ API ÏÇ¨Ïö©
   from utils.file_manager import save_file  # os ÎåÄÏã† ÏÇ¨Ïö©
   ```

### ÎîîÎ≤ÑÍπÖ ÌåÅ

```python
# ÎîîÎ≤ÑÍ∑∏ Î™®Îìú ÌôúÏÑ±Ìôî
import logging
logging.basicConfig(level=logging.DEBUG)

# Î™®Îìà ÎÇ¥Î∂ÄÏóêÏÑú Î°úÍπÖ
class MyModule(BaseExperimentModule):
    def __init__(self):
        super().__init__()
        self.logger = logging.getLogger(__name__)
        self.logger.debug("Î™®Îìà Ï¥àÍ∏∞ÌôîÎê®")
    
    def generate_design(self, inputs: Dict[str, Any]) -> ExperimentDesign:
        self.logger.debug(f"ÏûÖÎ†•Í∞í: {inputs}")
        
        # Ï§ëÍ∞Ñ Í≤∞Í≥º Ï∂úÎ†•
        factors = inputs.get('factors', [])
        self.logger.info(f"ÏöîÏù∏ Í∞úÏàò: {len(factors)}")
        
        # Ï°∞Í±¥Î∂Ä ÎîîÎ≤ÑÍπÖ
        if self.config.get('debug_mode', False):
            import pdb; pdb.set_trace()  # Í∞úÎ∞ú Ï§ëÏóêÎßå ÏÇ¨Ïö©
```

---

## üìö Ï∂îÍ∞Ä Î¶¨ÏÜåÏä§

### ÏòàÏ†ú Î™®Îìà

1. **[Í∏∞Î≥∏ ÏòàÏ†ú](examples/basic_module.py)** - Í∞ÑÎã®Ìïú 2ÏöîÏù∏ Ïã§Ìóò
2. **[Í≥†Í∏â ÏòàÏ†ú](examples/advanced_module.py)** - Î≥µÏû°Ìïú Ï†úÏïΩÏ°∞Í±¥ Ï≤òÎ¶¨
3. **[Í≥†Î∂ÑÏûê ÏòàÏ†ú](examples/polymer_module.py)** - Í≥†Î∂ÑÏûê ÌäπÌôî Í∏∞Îä•
4. **[AI ÌÜµÌï© ÏòàÏ†ú](examples/ai_integrated_module.py)** - AI Ï∂îÏ≤ú ÏãúÏä§ÌÖú

### Ï∞∏Í≥† Î¨∏ÏÑú

- [BaseExperimentModule API Î¨∏ÏÑú](../base_module.py)
- [Îç∞Ïù¥ÌÑ∞ Î™®Îç∏ ÏÉÅÏÑ∏ ÏÑ§Î™Ö](../../docs/data_models.md)
- [ÌîåÎû´Ìèº API Î†àÌçºÎü∞Ïä§](../../docs/api_reference.md)
- [Ïã§Ìóò ÏÑ§Í≥Ñ Ïù¥Î°†](../../docs/doe_theory.md)

### Ïú†Ïö©Ìïú ÎùºÏù¥Î∏åÎü¨Î¶¨

- **[pyDOE3](https://github.com/relf/pyDOE3)** - Ïã§Ìóò ÏÑ§Í≥Ñ ÏÉùÏÑ±
- **[statsmodels](https://www.statsmodels.org/)** - ÌÜµÍ≥Ñ Î∂ÑÏÑù
- **[scikit-learn](https://scikit-learn.org/)** - Î®∏Ïã†Îü¨Îãù
- **[plotly](https://plotly.com/python/)** - ÎåÄÌôîÌòï ÏãúÍ∞ÅÌôî

### Ïª§ÎÆ§ÎãàÌã∞

- **ÏßàÎ¨∏Í≥º ÎãµÎ≥Ä**: [Ìè¨Îüº](https://forum.universaldoe.com)
- **Î≤ÑÍ∑∏ Î¶¨Ìè¨Ìä∏**: [GitHub Issues](https://github.com/universaldoe/issues)
- **Î™®Îìà Í≥µÏú†**: [Module Marketplace](https://universaldoe.com/marketplace)
- **Í∞úÎ∞úÏûê Ï±ÑÌåÖ**: [Discord](https://discord.gg/universaldoe)

---

## üéâ Ï∂ïÌïòÌï©ÎãàÎã§!

Ïù¥Ï†ú Ïó¨Îü¨Î∂ÑÏùÄ Universal DOE PlatformÏùÑ ÏúÑÌïú Ïª§Ïä§ÌÖÄ Î™®ÎìàÏùÑ ÎßåÎì§ Ï§ÄÎπÑÍ∞Ä ÎêòÏóàÏäµÎãàÎã§. 
Ïó¨Îü¨Î∂ÑÏùò Ï∞ΩÏùòÏ†ÅÏù∏ ÏïÑÏù¥ÎîîÏñ¥ÏôÄ Ï†ÑÎ¨∏ ÏßÄÏãùÏù¥ Ï†Ñ ÏÑ∏Í≥Ñ Ïó∞Íµ¨ÏûêÎì§ÏóêÍ≤å ÎèÑÏõÄÏù¥ Îê† Í≤ÉÏûÖÎãàÎã§.

**Í∂ÅÍ∏àÌïú Ï†êÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî?** 
- üìß Ïù¥Î©îÏùº: support@universaldoe.com
- üí¨ Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ: ÌîåÎû´Ìèº ÎÇ¥ ÏßÄÏõê Î≤ÑÌäº

**Happy Experimenting! üß™‚ú®**
